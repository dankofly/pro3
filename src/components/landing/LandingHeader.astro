---
import LanguageSwitcher from './LanguageSwitcher.astro';
import type { Locale } from '~/i18n/utils';

export interface Props {
  locale: Locale;
  currentPath: string;
  nav: {
    home: string;
    howItWorks: string;
    launchSites: string;
    packages: string;
    regions: string;
    faq: string;
    contact: string;
    requestAvailability: string;
  };
}

const { locale, currentPath, nav } = Astro.props;
---

<header class="sticky top-0 z-40 bg-[#0a0f1a]/90 backdrop-blur-lg border-b border-white/[0.06]">
  <div class="max-w-6xl mx-auto px-4 sm:px-6">
    <div class="flex items-center justify-between h-14 sm:h-16">
      {/* Logo / Site name */}
      <a href={`/${locale}/`} class="text-lg font-bold text-white hover:text-sky-400 transition-colors whitespace-nowrap">
        KOFLY â€“ Tandemflug Lienz
      </a>

      {/* Desktop nav */}
      <nav class="hidden lg:flex items-center gap-5 text-sm">
        <a href="#ablauf" class="text-slate-400 hover:text-sky-400 transition-colors">{nav.howItWorks}</a>
        <a href="#startplaetze" class="text-slate-400 hover:text-sky-400 transition-colors">{nav.launchSites}</a>
        <a href="#pakete" class="text-slate-400 hover:text-sky-400 transition-colors">{nav.packages}</a>
        <a href="#regionen" class="text-slate-400 hover:text-sky-400 transition-colors">{nav.regions}</a>
        <a href="#faq" class="text-slate-400 hover:text-sky-400 transition-colors">{nav.faq}</a>
      </nav>

      {/* Right side: language switch + CTA */}
      <div class="flex items-center gap-3 sm:gap-4">
        <LanguageSwitcher currentLocale={locale} currentPath={currentPath} />
        <a
          href="#anfrage"
          class="hidden sm:inline-flex items-center px-4 py-2 text-sm font-semibold text-white bg-sky-500 hover:bg-sky-400 rounded-lg shadow-md shadow-sky-500/20 transition-colors"
        >
          {nav.requestAvailability}
        </a>

        {/* Mobile menu button */}
        <button
          id="mobile-menu-toggle"
          class="lg:hidden p-2 text-slate-400 hover:text-white"
          aria-label="Menu"
        >
          <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>

    {/* Mobile nav (hidden by default) */}
    <nav id="mobile-menu" class="hidden lg:hidden pb-4 border-t border-white/[0.06] pt-3">
      <div class="flex flex-col gap-3 text-sm">
        <a href="#ablauf" class="text-slate-400 hover:text-sky-400 py-1">{nav.howItWorks}</a>
        <a href="#startplaetze" class="text-slate-400 hover:text-sky-400 py-1">{nav.launchSites}</a>
        <a href="#pakete" class="text-slate-400 hover:text-sky-400 py-1">{nav.packages}</a>
        <a href="#regionen" class="text-slate-400 hover:text-sky-400 py-1">{nav.regions}</a>
        <a href="#faq" class="text-slate-400 hover:text-sky-400 py-1">{nav.faq}</a>
        <a
          href="#anfrage"
          class="inline-flex items-center justify-center px-4 py-2 text-sm font-semibold text-white bg-sky-500 hover:bg-sky-400 rounded-lg transition-colors mt-1"
        >
          {nav.requestAvailability}
        </a>
      </div>
    </nav>
  </div>
</header>

<script>
  const toggle = document.getElementById('mobile-menu-toggle');
  const menu = document.getElementById('mobile-menu');
  if (toggle && menu) {
    toggle.addEventListener('click', () => {
      menu.classList.toggle('hidden');
    });
    // Close menu on anchor click
    menu.querySelectorAll('a[href^="#"]').forEach((link) => {
      link.addEventListener('click', () => {
        menu.classList.add('hidden');
      });
    });
  }
</script>

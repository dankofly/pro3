---
export interface Props {
  currentLocale: string;
  currentPath: string;
}

const { currentLocale, currentPath } = Astro.props;

const localeLinks = [
  { code: 'de', label: 'DE' },
  { code: 'en', label: 'EN' },
  { code: 'nl', label: 'NL' },
];

function getLocalizedPath(path: string, locale: string): string {
  const cleanPath = path.replace(/^\/(de|en|nl)/, '');
  return `/${locale}${cleanPath || '/'}`;
}
---

<div class="flex items-center gap-1 text-sm">
  {localeLinks.map((loc, i) => (
    <>
      {i > 0 && <span class="text-gray-300 dark:text-gray-600">|</span>}
      {loc.code === currentLocale ? (
        <span class="font-semibold text-sky-700">{loc.label}</span>
      ) : (
        <a
          href={getLocalizedPath(currentPath, loc.code)}
          class="text-gray-500 hover:text-sky-700 transition-colors"
        >
          {loc.label}
        </a>
      )}
    </>
  ))}
</div>
